var inputField=document.querySelector(".input-box__input"),inputResult=document.querySelector(".input-box__result"),inputBtn=document.querySelector(".input-box__button"),checksumRadio=document.querySelector(".mode-box__input--checksum"),validationRadio=document.querySelector(".mode-box__input--validation"),card=document.querySelector(".card-box__card"),cardNumber=document.querySelector(".card-box__card--number"),cardLogo=document.querySelector(".card-box__card--logo"),radioButtons=document.querySelectorAll(".mode-box__input"),calculateChecksum=function(e){for(var t=e.toString().split("").map(Number),n=t.length-1;0<=n&&(t[n]*=2,9<t[n]&&(t[n]=t[n].toString().split("").map(Number).reduce(function(e,t){return e+t},0)),1!=n);n-=2);e=t.reduce(function(e,t){return e+t}).toString().split("").map(Number),e=e[e.length-1];return 0==e?0:10-e},validateCardNumber=function(e){if(16!=e.length)return!1;var t=e.toString().split("").map(Number),e=t[t.length-1];t.pop();for(var n=t.length-1;0<=n;n-=2)t[n]*=2,9<t[n]&&(t[n]=t[n].toString().split("").map(Number).reduce(function(e,t){return e+t},0));var u=t.reduce(function(e,t){return e+t}).toString().split("").map(Number),u=u[u.length-1];return 0==u?0==e:e==10-u},inputButtonHandler=function(){inputResult.classList.remove("input-box__result--success"),inputResult.classList.remove("input-box__result--error");var e=inputField.value;""!=e?(inputField.classList.remove("input-box__input--error"),inputResult.classList.remove("input-box__result--error"),checksumRadio.checked?inputResult.textContent="Checksum: ".concat(calculateChecksum(e)):validateCardNumber(e)?(inputResult.classList.add("input-box__result--success"),inputResult.textContent="Valid number"):(inputResult.classList.add("input-box__result--error"),inputResult.textContent="Invalid number")):(inputField.classList.add("input-box__input--error"),inputResult.textContent="Please enter a number",inputResult.classList.add("input-box__result--error"))},inputFieldProtectionHandler=function(e){var t="0"<=e.key&&e.key<="9",n=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(e.key);t||n||e.preventDefault(),validationRadio.checked&&16<=inputField.value.length&&t&&e.preventDefault()},inputToCardAndResultResetHandler=function(){var e;(inputResult.textContent="")==inputField.value&&(e=document.querySelector(".card-box__card--logo-img"),removeImg(e)),cardNumber.textContent=inputField.value,inputField.value=inputField.value.replace(/\D/g,""),validationRadio.checked&&16<inputField.value.length&&(inputField.value=inputField.value.slice(0,16),cardNumber.textContent=inputField.value),1<=inputField.value.length&&!document.querySelector(".card-box__card--logo-img")&&(console.log("append logo step 2"),cardLogo.appendChild(getLogo(Number(inputField.value[0]))))},removeImg=function(e){e&&e.remove()},createImg=function(e){var t;if(null!=e)return(t=document.createElement("img")).src="./dist/img/".concat(e,".webp"),t.classList.add("card-box__card--logo-img"),t},getLogo=function(e){switch(e){case 2:case 5:return createImg("mastercard");case 3:return createImg("aexpress");case 4:return createImg("visa");default:return null}},radioButtonsHandler=function(){var e;validationRadio.checked?(inputResult.textContent="",(inputField.value="")==inputField.value&&(e=document.querySelector(".card-box__card--logo-img"),removeImg(e)),cardNumber.textContent="",card.classList.add("visible"),card.classList.remove("hidden")):(inputResult.textContent="",inputField.value="",cardNumber.textContent="",card.classList.remove("visible"),card.classList.add("hidden"))};radioButtons.forEach(function(e){e.addEventListener("change",radioButtonsHandler)}),inputBtn.addEventListener("click",inputButtonHandler),inputField.addEventListener("keydown",inputFieldProtectionHandler),inputField.addEventListener("input",inputToCardAndResultResetHandler);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJpbnB1dEZpZWxkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5wdXRSZXN1bHQiLCJpbnB1dEJ0biIsImNoZWNrc3VtUmFkaW8iLCJ2YWxpZGF0aW9uUmFkaW8iLCJjYXJkIiwiY2FyZE51bWJlciIsInJhZGlvQnV0dG9ucyIsImNhbGN1bGF0ZUNoZWNrc3VtIiwidG9TdHJpbmciLCJudW1iZXIiLCJudW1iZXJBcnJheSIsImxlbmd0aCIsInNwbGl0IiwiaSIsIm1hcCIsIk51bWJlciIsInJlZHVjZSIsInN1bSIsImN1cnJlbnREaWdpdCIsInN1bURpZ2l0cyIsImxhc3REaWdpdCIsInZhbGlkYXRlQ2FyZE51bWJlciIsIm51bWJlclRvQ29tcGFyZSIsInBvcCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInZhbHVlIiwiY2hlY2tlZCIsInRleHRDb250ZW50IiwiY29uY2F0IiwiYWRkIiwiaXNEaWdpdCIsImtleSIsImlzQWxsb3dlZEtleSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImFsbG93ZWRLZXlzIiwiaW5jbHVkZXMiLCJpbnB1dFRvQ2FyZEFuZFJlc3VsdFJlc2V0SGFuZGxlciIsImltZ1RvUmVtb3ZlIiwic2xpY2UiLCJsb2ciLCJjb25zb2xlIiwiY2FyZExvZ28iLCJyZW1vdmVJbWciLCJnZXRMb2dvIiwibG9nbyIsImltZyIsIm5ld0ltZyIsImNyZWF0ZUltZyIsImNyZWF0ZUVsZW1lbnQiLCJkaWdpdCIsInJhZGlvQnV0dG9uc0hhbmRsZXIiLCJmb3JFYWNoIiwicmFkaW9CdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiaW5wdXRCdXR0b25IYW5kbGVyIiwiaW5wdXRGaWVsZFByb3RlY3Rpb25IYW5kbGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxXQUFhQyxTQUFTQyxjQUFjLG1CQUFtQixFQUN2REMsWUFBY0YsU0FBU0MsY0FBYyxvQkFBb0IsRUFEekRGLFNBQWFDLFNBQVNDLGNBQWMsb0JB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QUFBLEVBQ2IsS0FBQSxFQUNBLE9BQUFBLFVBQUEsVUFBQSxFQUVELEtBQU1HLEVBQ0wsT0FBSWpELFVBQUFBLE1BQWdCd0IsRUFObkIsUUFDQyxPQU9EOUIsSUFORCxDQUNELEVBU0V1RCxvQkFBQSxXQU5ELElBV0NwRCxFQUpBSyxnQkFBV3VCLFNBTlg1QixZQU9LeUIsWUFBYyxJQU5uQjVCLFdBT0s0QixNQUFVRCxLQUNmM0IsV0FBTTZCLFFBQ04xQixFQUFZNEIsU0FBYzdCLGNBQUUsMkJBQUEsRUFOM0I2QyxVQU9EL0MsQ0FBbUIsR0FMbkJRLFdBT0tvQixZQUFpQixHQU50QnJCLEtBT0FBLFVBQUtxQixJQUFVSyxTQUFJLEVBQ3BCMUIsS0FBQXFCLFVBQUFELE9BQUEsUUFBQSxJQUdEbEIsWUFBYStDLFlBQVEsR0FDcEJDLFdBQVc1QixNQUFDNkIsR0FDWGxELFdBQUF1QixZQUFBLEdBQ0YzQixLQUFBQSxVQUFTc0QsT0FBQUEsU0FBd0IsRUFDakMxRCxLQUFBQSxVQUFXMEQsSUFBQUEsUUFBaUIsRUFONUIsRUFFQWpELGFBQWErQyxRQUFRLFNBQUFDLEdBQ3BCQSxFQUFZQyxpQkFBaUIsU0FBVUgsbUJBQW1CLENBQzNELENBQUMsRUFDRG5ELFNBQVNzRCxpQkFBaUIsUUFBU0Msa0JBQWtCLEVBQ3JEM0QsV0FBVzBELGlCQUFpQixVQUFXRSwyQkFBMkIsRUFDbEU1RCxXQUFXMEQsaUJBQWlCLFFBQVNqQixnQ0FBZ0MiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtYm94X19pbnB1dCcpXHJcbmNvbnN0IGlucHV0UmVzdWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlucHV0LWJveF9fcmVzdWx0JylcclxuY29uc3QgaW5wdXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtYm94X19idXR0b24nKVxyXG5jb25zdCBjaGVja3N1bVJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGUtYm94X19pbnB1dC0tY2hlY2tzdW0nKVxyXG5jb25zdCB2YWxpZGF0aW9uUmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZS1ib3hfX2lucHV0LS12YWxpZGF0aW9uJylcclxuY29uc3QgY2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJveF9fY2FyZCcpXHJcbmNvbnN0IGNhcmROdW1iZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1ib3hfX2NhcmQtLW51bWJlcicpXHJcbmNvbnN0IGNhcmRMb2dvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtYm94X19jYXJkLS1sb2dvJylcclxuY29uc3QgcmFkaW9CdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGUtYm94X19pbnB1dCcpXHJcblxyXG5jb25zdCBjYWxjdWxhdGVDaGVja3N1bSA9IG51bWJlciA9PiB7XHJcblx0bGV0IG51bWJlckFycmF5ID0gbnVtYmVyLnRvU3RyaW5nKCkuc3BsaXQoJycpLm1hcChOdW1iZXIpXHJcblx0Zm9yIChsZXQgaSA9IG51bWJlckFycmF5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAyKSB7XHJcblx0XHRudW1iZXJBcnJheVtpXSAqPSAyXHJcblx0XHRpZiAobnVtYmVyQXJyYXlbaV0gPiA5KSB7XHJcblx0XHRcdG51bWJlckFycmF5W2ldID0gbnVtYmVyQXJyYXlbaV1cclxuXHRcdFx0XHQudG9TdHJpbmcoKVxyXG5cdFx0XHRcdC5zcGxpdCgnJylcclxuXHRcdFx0XHQubWFwKE51bWJlcilcclxuXHRcdFx0XHQucmVkdWNlKChzdW0sIGN1cnJlbnREaWdpdCkgPT4gc3VtICsgY3VycmVudERpZ2l0LCAwKVxyXG5cdFx0fVxyXG5cdFx0aWYgKGkgPT0gMSkge1xyXG5cdFx0XHRicmVha1xyXG5cdFx0fVxyXG5cdH1cclxuXHRsZXQgc3VtID0gbnVtYmVyQXJyYXkucmVkdWNlKChzdW0sIGN1cnJlbnREaWdpdCkgPT4gc3VtICsgY3VycmVudERpZ2l0KVxyXG5cdGxldCBzdW1EaWdpdHMgPSBzdW0udG9TdHJpbmcoKS5zcGxpdCgnJykubWFwKE51bWJlcilcclxuXHRsZXQgbGFzdERpZ2l0ID0gc3VtRGlnaXRzW3N1bURpZ2l0cy5sZW5ndGggLSAxXVxyXG5cdGlmIChsYXN0RGlnaXQgPT0gMCkge1xyXG5cdFx0cmV0dXJuIDBcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIDEwIC0gbGFzdERpZ2l0XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCB2YWxpZGF0ZUNhcmROdW1iZXIgPSBudW1iZXIgPT4ge1xyXG5cdGlmIChudW1iZXIubGVuZ3RoICE9IDE2KSB7XHJcblx0XHRyZXR1cm4gZmFsc2VcclxuXHR9XHJcblx0bGV0IG51bWJlckFycmF5ID0gbnVtYmVyLnRvU3RyaW5nKCkuc3BsaXQoJycpLm1hcChOdW1iZXIpXHJcblx0bGV0IG51bWJlclRvQ29tcGFyZSA9IG51bWJlckFycmF5W251bWJlckFycmF5Lmxlbmd0aCAtIDFdXHJcblx0bnVtYmVyQXJyYXkucG9wKClcclxuXHRmb3IgKGxldCBpID0gbnVtYmVyQXJyYXkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDIpIHtcclxuXHRcdG51bWJlckFycmF5W2ldICo9IDJcclxuXHRcdGlmIChudW1iZXJBcnJheVtpXSA+IDkpIHtcclxuXHRcdFx0bnVtYmVyQXJyYXlbaV0gPSBudW1iZXJBcnJheVtpXVxyXG5cdFx0XHRcdC50b1N0cmluZygpXHJcblx0XHRcdFx0LnNwbGl0KCcnKVxyXG5cdFx0XHRcdC5tYXAoTnVtYmVyKVxyXG5cdFx0XHRcdC5yZWR1Y2UoKHN1bSwgY3VycmVudERpZ2l0KSA9PiBzdW0gKyBjdXJyZW50RGlnaXQsIDApXHJcblx0XHR9XHJcblx0fVxyXG5cdGxldCBzdW0gPSBudW1iZXJBcnJheS5yZWR1Y2UoKHN1bSwgY3VycmVudERpZ2l0KSA9PiBzdW0gKyBjdXJyZW50RGlnaXQpXHJcblx0bGV0IHN1bURpZ2l0cyA9IHN1bS50b1N0cmluZygpLnNwbGl0KCcnKS5tYXAoTnVtYmVyKVxyXG5cdGxldCBsYXN0RGlnaXQgPSBzdW1EaWdpdHNbc3VtRGlnaXRzLmxlbmd0aCAtIDFdXHJcblx0aWYgKGxhc3REaWdpdCA9PSAwKSB7XHJcblx0XHRyZXR1cm4gbnVtYmVyVG9Db21wYXJlID09IDBcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIG51bWJlclRvQ29tcGFyZSA9PSAxMCAtIGxhc3REaWdpdFxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgaW5wdXRCdXR0b25IYW5kbGVyID0gKCkgPT4ge1xyXG5cdGlucHV0UmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0LWJveF9fcmVzdWx0LS1zdWNjZXNzJylcclxuXHRpbnB1dFJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC1ib3hfX3Jlc3VsdC0tZXJyb3InKVxyXG5cdGxldCB2YWx1ZSA9IGlucHV0RmllbGQudmFsdWVcclxuXHRpZiAodmFsdWUgIT0gJycpIHtcclxuXHRcdGlucHV0RmllbGQuY2xhc3NMaXN0LnJlbW92ZSgnaW5wdXQtYm94X19pbnB1dC0tZXJyb3InKVxyXG5cdFx0aW5wdXRSZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnaW5wdXQtYm94X19yZXN1bHQtLWVycm9yJylcclxuXHRcdGlmIChjaGVja3N1bVJhZGlvLmNoZWNrZWQpIHtcclxuXHRcdFx0aW5wdXRSZXN1bHQudGV4dENvbnRlbnQgPSBgQ2hlY2tzdW06ICR7Y2FsY3VsYXRlQ2hlY2tzdW0odmFsdWUpfWBcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmICh2YWxpZGF0ZUNhcmROdW1iZXIodmFsdWUpKSB7XHJcblx0XHRcdFx0aW5wdXRSZXN1bHQuY2xhc3NMaXN0LmFkZCgnaW5wdXQtYm94X19yZXN1bHQtLXN1Y2Nlc3MnKVxyXG5cdFx0XHRcdGlucHV0UmVzdWx0LnRleHRDb250ZW50ID0gYFZhbGlkIG51bWJlcmBcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpbnB1dFJlc3VsdC5jbGFzc0xpc3QuYWRkKCdpbnB1dC1ib3hfX3Jlc3VsdC0tZXJyb3InKVxyXG5cdFx0XHRcdGlucHV0UmVzdWx0LnRleHRDb250ZW50ID0gYEludmFsaWQgbnVtYmVyYFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGlucHV0RmllbGQuY2xhc3NMaXN0LmFkZCgnaW5wdXQtYm94X19pbnB1dC0tZXJyb3InKVxyXG5cdFx0aW5wdXRSZXN1bHQudGV4dENvbnRlbnQgPSAnUGxlYXNlIGVudGVyIGEgbnVtYmVyJ1xyXG5cdFx0aW5wdXRSZXN1bHQuY2xhc3NMaXN0LmFkZCgnaW5wdXQtYm94X19yZXN1bHQtLWVycm9yJylcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGlucHV0RmllbGRQcm90ZWN0aW9uSGFuZGxlciA9IGUgPT4ge1xyXG5cdGNvbnN0IGFsbG93ZWRLZXlzID0gWydCYWNrc3BhY2UnLCAnRGVsZXRlJywgJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0J11cclxuXHRjb25zdCBpc0RpZ2l0ID0gZS5rZXkgPj0gJzAnICYmIGUua2V5IDw9ICc5J1xyXG5cdGNvbnN0IGlzQWxsb3dlZEtleSA9IGFsbG93ZWRLZXlzLmluY2x1ZGVzKGUua2V5KVxyXG5cdGlmICghaXNEaWdpdCAmJiAhaXNBbGxvd2VkS2V5KSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KClcclxuXHR9XHJcblx0aWYgKHZhbGlkYXRpb25SYWRpby5jaGVja2VkICYmIGlucHV0RmllbGQudmFsdWUubGVuZ3RoID49IDE2ICYmIGlzRGlnaXQpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgaW5wdXRUb0NhcmRBbmRSZXN1bHRSZXNldEhhbmRsZXIgPSAoKSA9PiB7XHJcblx0aW5wdXRSZXN1bHQudGV4dENvbnRlbnQgPSAnJ1xyXG5cdGlmIChpbnB1dEZpZWxkLnZhbHVlID09ICcnKSB7XHJcblx0XHRsZXQgaW1nVG9SZW1vdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1ib3hfX2NhcmQtLWxvZ28taW1nJylcclxuXHRcdHJlbW92ZUltZyhpbWdUb1JlbW92ZSlcclxuXHR9XHJcblx0Y2FyZE51bWJlci50ZXh0Q29udGVudCA9IGlucHV0RmllbGQudmFsdWVcclxuXHRpbnB1dEZpZWxkLnZhbHVlID0gaW5wdXRGaWVsZC52YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpXHJcblx0aWYgKHZhbGlkYXRpb25SYWRpby5jaGVja2VkICYmIGlucHV0RmllbGQudmFsdWUubGVuZ3RoID4gMTYpIHtcclxuXHRcdGlucHV0RmllbGQudmFsdWUgPSBpbnB1dEZpZWxkLnZhbHVlLnNsaWNlKDAsIDE2KVxyXG5cdFx0Y2FyZE51bWJlci50ZXh0Q29udGVudCA9IGlucHV0RmllbGQudmFsdWVcclxuXHR9XHJcblx0aWYgKGlucHV0RmllbGQudmFsdWUubGVuZ3RoID49IDEgJiYgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5jYXJkLWJveF9fY2FyZC0tbG9nby1pbWdgKSkge1xyXG5cdFx0Y29uc29sZS5sb2coYGFwcGVuZCBsb2dvIHN0ZXAgMmApXHJcblx0XHRjYXJkTG9nby5hcHBlbmRDaGlsZChnZXRMb2dvKE51bWJlcihpbnB1dEZpZWxkLnZhbHVlWzBdKSkpXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCByZW1vdmVJbWcgPSBpbWcgPT4ge1xyXG5cdGltZyA/IGltZy5yZW1vdmUoKSA6IG51bGxcclxufVxyXG5cclxuY29uc3QgY3JlYXRlSW1nID0gbG9nbyA9PiB7XHJcblx0aWYgKGxvZ28gIT0gbnVsbCkge1xyXG5cdFx0bGV0IG5ld0ltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXHJcblx0XHRuZXdJbWcuc3JjID0gYC4vZGlzdC9pbWcvJHtsb2dvfS53ZWJwYFxyXG5cdFx0bmV3SW1nLmNsYXNzTGlzdC5hZGQoJ2NhcmQtYm94X19jYXJkLS1sb2dvLWltZycpXHJcblx0XHRyZXR1cm4gbmV3SW1nXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBnZXRMb2dvID0gZGlnaXQgPT4ge1xyXG5cdHN3aXRjaCAoZGlnaXQpIHtcclxuXHRcdGNhc2UgMjpcclxuXHRcdGNhc2UgNTpcclxuXHRcdFx0cmV0dXJuIGNyZWF0ZUltZygnbWFzdGVyY2FyZCcpXHJcblx0XHRjYXNlIDM6XHJcblx0XHRcdHJldHVybiBjcmVhdGVJbWcoJ2FleHByZXNzJylcclxuXHRcdGNhc2UgNDpcclxuXHRcdFx0cmV0dXJuIGNyZWF0ZUltZygndmlzYScpXHJcblx0XHRkZWZhdWx0OlxyXG5cdFx0XHRyZXR1cm4gbnVsbFxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgcmFkaW9CdXR0b25zSGFuZGxlciA9ICgpID0+IHtcclxuXHRpZiAodmFsaWRhdGlvblJhZGlvLmNoZWNrZWQpIHtcclxuXHRcdGlucHV0UmVzdWx0LnRleHRDb250ZW50ID0gJydcclxuXHRcdGlucHV0RmllbGQudmFsdWUgPSAnJ1xyXG5cdFx0aWYgKGlucHV0RmllbGQudmFsdWUgPT0gJycpIHtcclxuXHRcdFx0bGV0IGltZ1RvUmVtb3ZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtYm94X19jYXJkLS1sb2dvLWltZycpXHJcblx0XHRcdHJlbW92ZUltZyhpbWdUb1JlbW92ZSlcclxuXHRcdH1cclxuXHRcdGNhcmROdW1iZXIudGV4dENvbnRlbnQgPSAnJ1xyXG5cdFx0Y2FyZC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJylcclxuXHRcdGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuXHR9IGVsc2Uge1xyXG5cdFx0aW5wdXRSZXN1bHQudGV4dENvbnRlbnQgPSAnJ1xyXG5cdFx0aW5wdXRGaWVsZC52YWx1ZSA9ICcnXHJcblx0XHRjYXJkTnVtYmVyLnRleHRDb250ZW50ID0gJydcclxuXHRcdGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpXHJcblx0XHRjYXJkLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcblx0fVxyXG59XHJcblxyXG5yYWRpb0J1dHRvbnMuZm9yRWFjaChyYWRpb0J1dHRvbiA9PiB7XHJcblx0cmFkaW9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcmFkaW9CdXR0b25zSGFuZGxlcilcclxufSlcclxuaW5wdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnB1dEJ1dHRvbkhhbmRsZXIpXHJcbmlucHV0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGlucHV0RmllbGRQcm90ZWN0aW9uSGFuZGxlcilcclxuaW5wdXRGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGlucHV0VG9DYXJkQW5kUmVzdWx0UmVzZXRIYW5kbGVyKVxyXG4iXX0=
