var inputField=document.querySelector(".input-box__input"),inputResult=document.querySelector(".input-box__result"),inputBtn=document.querySelector(".input-box__button"),checksumRadio=document.querySelector(".mode-box__input--checksum"),validationRadio=document.querySelector(".mode-box__input--validation"),card=document.querySelector(".card-box__card"),cardNumber=document.querySelector(".card-box__card--number"),cardLogo=document.querySelector(".card-box__card--logo"),radioButtons=document.querySelectorAll(".mode-box__input"),calculateChecksum=function(e){for(var t=e.toString().split("").map(Number),n=t.length-1;0<=n&&(t[n]*=2,9<t[n]&&(t[n]=t[n].toString().split("").map(Number).reduce(function(e,t){return e+t},0)),1!=n);n-=2);e=t.reduce(function(e,t){return e+t}).toString().split("").map(Number),e=e[e.length-1];return 0==e?0:10-e},validateCardNumber=function(e){if(16!=e.length)return!1;var t=e.toString().split("").map(Number),e=t[t.length-1];t.pop();for(var n=t.length-1;0<=n;n-=2)t[n]*=2,9<t[n]&&(t[n]=t[n].toString().split("").map(Number).reduce(function(e,t){return e+t},0));var u=t.reduce(function(e,t){return e+t}).toString().split("").map(Number),u=u[u.length-1];return 0==u?0==e:e==10-u},inputButtonHandler=function(){inputResult.classList.remove("input-box__result--success"),inputResult.classList.remove("input-box__result--error");var e=inputField.value;""!=e?(inputField.classList.remove("input-box__input--error"),inputResult.classList.remove("input-box__result--error"),checksumRadio.checked?inputResult.textContent="Checksum: ".concat(calculateChecksum(e)):validateCardNumber(e)?(inputResult.classList.add("input-box__result--success"),inputResult.textContent="Valid number"):(inputResult.classList.add("input-box__result--error"),inputResult.textContent="Invalid number")):(inputField.classList.add("input-box__input--error"),inputResult.textContent="Please enter a number",inputResult.classList.add("input-box__result--error"))},inputFieldProtectionHandler=function(e){var t="0"<=e.key&&e.key<="9",n=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(e.key);t||n||e.preventDefault(),validationRadio.checked&&16<=inputField.value.length&&t&&e.preventDefault()},inputToCardAndResultResetHandler=function(){var e;(inputResult.textContent="")==inputField.value&&(e=document.querySelector(".card-box__card--logo-img"),removeImg(e)),inputField.value.length<2&&checkCardLogo(inputField.value),inputField.value=inputField.value.replace(/\D/g,""),cardNumber.textContent=inputField.value,validationRadio.checked&&16<inputField.value.length&&(inputField.value=inputField.value.slice(0,16),cardNumber.textContent=inputField.value),1<=inputField.value.length&&!document.querySelector(".card-box__card--logo-img")&&cardLogo.appendChild(getLogo(Number(inputField.value[0])))},removeImg=function(e){e&&e.remove()},createImg=function(e){var t;if(null!=e)return(t=document.createElement("img")).src="./dist/img/".concat(e,".webp"),t.classList.add("card-box__card--logo-img"),t},getLogo=function(e){switch(e){case 2:case 5:return createImg("mastercard");case 3:return createImg("aexpress");case 4:return createImg("visa");default:return null}},radioButtonsHandler=function(){var e;validationRadio.checked?(inputResult.textContent="",(inputField.value="")==inputField.value&&(e=document.querySelector(".card-box__card--logo-img"),removeImg(e)),cardNumber.textContent="",card.classList.add("visible"),card.classList.remove("hidden")):(inputResult.textContent="",inputField.value="",cardNumber.textContent="",card.classList.remove("visible"),card.classList.add("hidden"))};radioButtons.forEach(function(e){e.addEventListener("change",radioButtonsHandler)}),inputBtn.addEventListener("click",inputButtonHandler),inputField.addEventListener("keydown",inputFieldProtectionHandler),inputField.addEventListener("input",inputToCardAndResultResetHandler);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJpbnB1dEZpZWxkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5wdXRSZXN1bHQiLCJpbnB1dEJ0biIsImNoZWNrc3VtUmFkaW8iLCJ2YWxpZGF0aW9uUmFkaW8iLCJjYXJkIiwiY2FyZE51bWJlciIsInJhZGlvQnV0dG9ucyIsImNhbGN1bGF0ZUNoZWNrc3VtIiwidG9TdHJpbmciLCJudW1iZXIiLCJudW1iZXJBcnJheSIsImxlbmd0aCIsInNwbGl0IiwiaSIsIm1hcCIsIk51bWJlciIsInJlZHVjZSIsInN1bSIsImN1cnJlbnREaWdpdCIsInN1bURpZ2l0cyIsImxhc3REaWdpdCIsInZhbGlkYXRlQ2FyZE51bWJlciIsIm51bWJlclRvQ29tcGFyZSIsInBvcCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInZhbHVlIiwiY2hlY2tlZCIsInRleHRDb250ZW50IiwiY29uY2F0IiwiYWRkIiwiaXNEaWdpdCIsImtleSIsImlzQWxsb3dlZEtleSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImFsbG93ZWRLZXlzIiwiaW5jbHVkZXMiLCJpbnB1dFRvQ2FyZEFuZFJlc3VsdFJlc2V0SGFuZGxlciIsInJlbW92ZUltZyIsImNoZWNrQ2FyZExvZ28iLCJzbGljZSIsImFwcGVuZENoaWxkIiwiZ2V0TG9nbyIsImNhcmRMb2dvIiwibG9nbyIsImltZyIsIm5ld0ltZyIsImNyZWF0ZUltZyIsImNyZWF0ZUVsZW1lbnQiLCJkaWdpdCIsInJhZGlvQnV0dG9uc0hhbmRsZXIiLCJmb3JFYWNoIiwicmFkaW9CdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiaW5wdXRCdXR0b25IYW5kbGVyIiwiaW5wdXRGaWVsZFByb3RlY3Rpb25IYW5kbGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxXQUFhQyxTQUFTQyxjQUFjLG1CQUFtQixFQUN2REMsWUFBY0YsU0FBU0MsY0FBYyxvQkFBb0IsRUFEekRGLFNBQWFDLFNBQVNDLGNBQWMsb0JBQW9CLEVBQ3hEQyxjQUFjRixTQUFTQyxjQUFjLDRCQUFxQixFQUMxREUsZ0JBQW9CRixTQUFBQSxjQUFjLDhCQUFxQixFQUN2REcsS0FBQUEsU0FBZ0JKLGNBQVNDLGlCQUFjLEVBQ3ZDSSxXQUFlTCxTQUFHQSxjQUFTQyx5QkFBYyxFQUN6Q0ssU0FBT04sU0FBU0MsY0FBYyx1QkFBa0IsRUFDaERNLGFBQWFQLFNBQVNDLGlCQUFjLGtCQUF5QixFQUU3RE8sa0JBQWVSLFNBQUFBLEdBSXBCLElBRkQsSUFBTVMsRUFBQUEsRUFBb0JDLFNBQXBCRCxFQUFBQSxNQUFBQSxFQUFBQSxFQUFBQSxJQUFvQkUsTUFBTSxFQUMzQkMsRUFBQUEsRUFBb0JDLE9BQVMsRUFBUSxHQUFMQyxJQUNwQ0YsRUFBVUcsSUFBR0gsRUFDTyxFQUFuQkEsRUFBY0csS0FFYkgsRUFER0EsR0FBWUcsRUFBUUEsR0FFckJMLFNBREZFLEVBRUVFLE1BRXlCLEVBQUEsRUFEekJFLElBQ2tEQyxNQUFFLEVBQ3ZEQyxPQUFBLFNBQUFDLEVBQUFDLEdBQUEsT0FBQUQsRUFBQUMsQ0FBQSxFQUFBLENBQUEsR0FFQyxHQUFBTCxHQVgwQ0EsR0FBSyxHQWNzQk0sRUFBbkJGLEVBQU1DLE9BQVksU0FBQUQsRUFBQUMsR0FBQSxPQUFBRCxFQUFBQyxDQUFBLENBQUEsRUFBQ1YsU0FBQSxFQUFBSSxNQUFBLEVBQUEsRUFBQUUsSUFBQUMsTUFBQSxFQUN2RUssRUFBYUQsRUFBT1gsRUFBV0ksT0FBYSxHQUU1QyxPQURnQk8sR0FBaEJDLEVBQ0lBLEVBRUcsR0FBQUEsQ0FHUixFQUVNQyxtQkFBcUIsU0FBQVosR0FDMUIsR0FBaUIsSUFBakJBLEVBQVVFLE9BQ1QsTUFBQSxDQUFBLEVBRUQsSUFBQUQsRUFBZUQsRUFBU0QsU0FBUyxFQUFFSSxNQUFNLEVBQUMsRUFBR0UsSUFBSUMsTUFBQ0EsRUFDbERPLEVBQW1CWixFQUFjQSxFQUFZQyxPQUFPLEdBQ3BERCxFQUFXYSxJQUFJLEVBQ2YsSUFBQSxJQUFLVixFQUFLSCxFQUFjQyxPQUFPLEVBQU8sR0FBSEUsRUFBUUEsR0FBRyxFQUM3Q0gsRUFBQUEsSUFBYyxFQUNJLEVBQWxCQSxFQUFJQSxLQUNIQSxFQUFBQSxHQUFjQSxFQUFHQSxHQUNmRixTQUd5QixFQUZ6QkksTUFFb0QsRUFBQSxFQUN2REUsSUFBQUMsTUFBQSxFQUNEQyxPQUFBLFNBQUFDLEVBQUFDLEdBQUEsT0FBQUQsRUFBQUMsQ0FBQSxFQUFBLENBQUEsR0FDQSxJQUNBQyxFQUR1RVQsRUFBQU0sT0FBQSxTQUFBQyxFQUFBQyxHQUFBLE9BQUFELEVBQUFDLENBQUEsQ0FBQSxFQUNwRFYsU0FBUyxFQUFFSSxNQUFNLEVBQUMsRUFBR0UsSUFBSUMsTUFBQ0EsRUFDN0NLLEVBQWFELEVBQVlBLEVBQVVSLE9BQU8sR0FDMUMsT0FBYSxHQUFiUyxFQUN1QixHQUF0QkUsRUFFQUEsR0FBc0IsR0FBTUYsQ0FFOUIsRUFHQ3BCLG1CQUFzQndCLFdBQXRCeEIsWUFDV3lCLFVBQVVELE9BQU8sNEJBQTRCLEVBQXhEeEIsWUFDU3lCLFVBQUc1QixPQUFnQiwwQkFBQSxFQUE1QixJQUNBNkIsRUFBUzdCLFdBQVE2QixNQUNOLElBQVY3QixHQUFBQSxXQUNBRyxVQUFZeUIsT0FBVUQseUJBQU8sRUFBN0J4QixZQUNJRSxVQUFjeUIsT0FBUywwQkFBQSxFQUMxQjNCLGNBQVk0QixRQUFaNUIsWUFDTTRCLFlBQUEsYUFBQUMsT0FBQXRCLGtCQUFBbUIsQ0FBQSxDQUFBLEVBQ0ZMLG1CQUNTSSxDQUFVSyxHQUF0QjlCLFlBQ0FBLFVBQVk0QixJQUFBQSw0QkFBNEIsRUFBeEM1QixZQUNNNEIsWUFBQSxpQkFDTjVCLFlBQ0FBLFVBQVk0QixJQUFBQSwwQkFBOEIsRUFBMUM1QixZQUNENEIsWUFBQSxvQkFHRC9CLFdBQ0FHLFVBQVk0QixJQUFXLHlCQUFHLEVBQTFCNUIsWUFDQUEsWUFBc0I4Qix3QkFDdkI5QixZQUFBeUIsVUFBQUssSUFBQSwwQkFBQSxFQUdELEVBRU9DLDRCQUE0QkMsU0FBQUEsR0FEbEMsSUFHS0QsRUFBWUUsS0FBTEMsRUFBS0QsS0FBY0MsRUFBQUYsS0FBQSxJQUM1QkcsRUFGa0JDLENBQUFBLFlBQVlDLFNBQVdMLFlBQUksY0FFN0JLLFNBQUFILEVBQUFGLEdBQUEsRUFDbkJELEdBQUFFLEdBQ0FDLEVBQUFDLGVBQUloQyxFQUVKQSxnQkFBQXdCLFNBQUEsSUFBQTlCLFdBQUE2QixNQUFBZixRQUFBb0IsR0FDQUcsRUFBQUMsZUFBQSxDQUFELEVBS0VHLGlDQUEyQnZDLFdBRDVCLElBSUlGLEdBTEpHLFlBR1U0QixZQUFhLEtBQ3ZCL0IsV0FBQTZCLFFBQ0k3QixFQUFXNkIsU0FBWTNCLGNBQU0sMkJBQUEsRUFGaEN3QyxVQUdBQyxDQUFjM0MsR0FFZkEsV0FBVzZCLE1BQVE3QixPQUFVLEdBQzdCUSxjQUFXdUIsV0FBYy9CLEtBQUFBLEVBRHpCQSxXQUdDQSxNQUFnQkEsV0FBR0EsTUFBVzZCLFFBQVcsTUFBTyxFQUFBLEVBRmpEckIsV0FHQ0EsWUFBc0JSLFdBQUdBLE1BQzFCTSxnQkFBQXdCLFNBQUEsR0FBQTlCLFdBQUE2QixNQUFBZixTQUNBZCxXQUFJQSxNQUFXNkIsV0FBWUEsTUFBU2UsTUFBQzNDLEVBQVEsRUFBQ0MsRUFGN0NNLFdBR1NxQyxZQUFZQyxXQUFRNUIsT0FFOUIsR0FBQWxCLFdBQUE2QixNQUFBZixRQUFBLENBQUFiLFNBQUFDLGNBQUEsMkJBQUEsR0FFRDZDLFNBQU1MLFlBQVlJLFFBQVpKLE9BQWUxQyxXQUFJNkIsTUFBQSxFQUFBLENBQUEsQ0FBQSxDQUV6QixFQUdLbUIsVUFBWSxTQUFBQyxHQUpoQkEsR0FLQ0EsRUFBSUMsT0FBU2pELENBSmYsRUFPRWtELFVBQWEsU0FBQUgsR0FKZCxJQU1BRSxFQU5BLEdBS0EsTUFBQUYsRUFEQyxPQUVERSxFQUFBakQsU0FBQW1ELGNBQUEsS0FBQSxHQUVLTixJQUFPLGNBQUFkLE9BQVBjLEVBQVVPLE9BQUFBLEVBQ2ZILEVBQUF0QixVQUFhSyxJQUFBLDBCQUFBLEVBQ1BpQixDQUpQLEVBUUdKLFFBQU9LLFNBQUFBLEdBTFQsT0FNTUUsR0FMTCxLQU1DLEVBTEQsS0FNQSxFQUxDLE9BTUFGLFVBQVcsWUFBQSxFQUNiLEtBQUEsRUFDQSxPQUFBQSxVQUFBLFVBQUEsRUFFRCxLQUFNRyxFQUNMLE9BQUloRCxVQUFBQSxNQUFnQndCLEVBTm5CLFFBQ0MsT0FPRDlCLElBTkQsQ0FDRCxFQVNFc0Qsb0JBQUEsV0FORCxJQVdDbkQsRUFKQUssZ0JBQVd1QixTQU5YNUIsWUFPS3lCLFlBQWMsSUFObkI1QixXQU9LNEIsTUFBVUQsS0FDZjNCLFdBQU02QixRQUNOMUIsRUFBWTRCLFNBQWM3QixjQUFFLDJCQUFBLEVBTjNCd0MsVUFPRDFDLENBQW1CLEdBTG5CUSxXQU9Lb0IsWUFBaUIsR0FOdEJyQixLQU9BQSxVQUFLcUIsSUFBVUssU0FBSSxFQUNwQjFCLEtBQUFxQixVQUFBRCxPQUFBLFFBQUEsSUFHRGxCLFlBQWE4QyxZQUFRLEdBQ3BCQyxXQUFXM0IsTUFBQzRCLEdBQ1hqRCxXQUFBdUIsWUFBQSxHQUNGM0IsS0FBQUEsVUFBU3FELE9BQUFBLFNBQXdCLEVBQ2pDekQsS0FBQUEsVUFBV3lELElBQUFBLFFBQWlCLEVBTjVCLEVBRUFoRCxhQUFhOEMsUUFBUSxTQUFBQyxHQUNwQkEsRUFBWUMsaUJBQWlCLFNBQVVILG1CQUFtQixDQUMzRCxDQUFDLEVBQ0RsRCxTQUFTcUQsaUJBQWlCLFFBQVNDLGtCQUFrQixFQUNyRDFELFdBQVd5RCxpQkFBaUIsVUFBV0UsMkJBQTJCLEVBQ2xFM0QsV0FBV3lELGlCQUFpQixRQUFTaEIsZ0NBQWdDIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlucHV0LWJveF9faW5wdXQnKVxyXG5jb25zdCBpbnB1dFJlc3VsdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1ib3hfX3Jlc3VsdCcpXHJcbmNvbnN0IGlucHV0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlucHV0LWJveF9fYnV0dG9uJylcclxuY29uc3QgY2hlY2tzdW1SYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlLWJveF9faW5wdXQtLWNoZWNrc3VtJylcclxuY29uc3QgdmFsaWRhdGlvblJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGUtYm94X19pbnB1dC0tdmFsaWRhdGlvbicpXHJcbmNvbnN0IGNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1ib3hfX2NhcmQnKVxyXG5jb25zdCBjYXJkTnVtYmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtYm94X19jYXJkLS1udW1iZXInKVxyXG5jb25zdCBjYXJkTG9nbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJveF9fY2FyZC0tbG9nbycpXHJcbmNvbnN0IHJhZGlvQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RlLWJveF9faW5wdXQnKVxyXG5cclxuY29uc3QgY2FsY3VsYXRlQ2hlY2tzdW0gPSBudW1iZXIgPT4ge1xyXG5cdGxldCBudW1iZXJBcnJheSA9IG51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKS5tYXAoTnVtYmVyKVxyXG5cdGZvciAobGV0IGkgPSBudW1iZXJBcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMikge1xyXG5cdFx0bnVtYmVyQXJyYXlbaV0gKj0gMlxyXG5cdFx0aWYgKG51bWJlckFycmF5W2ldID4gOSkge1xyXG5cdFx0XHRudW1iZXJBcnJheVtpXSA9IG51bWJlckFycmF5W2ldXHJcblx0XHRcdFx0LnRvU3RyaW5nKClcclxuXHRcdFx0XHQuc3BsaXQoJycpXHJcblx0XHRcdFx0Lm1hcChOdW1iZXIpXHJcblx0XHRcdFx0LnJlZHVjZSgoc3VtLCBjdXJyZW50RGlnaXQpID0+IHN1bSArIGN1cnJlbnREaWdpdCwgMClcclxuXHRcdH1cclxuXHRcdGlmIChpID09IDEpIHtcclxuXHRcdFx0YnJlYWtcclxuXHRcdH1cclxuXHR9XHJcblx0bGV0IHN1bSA9IG51bWJlckFycmF5LnJlZHVjZSgoc3VtLCBjdXJyZW50RGlnaXQpID0+IHN1bSArIGN1cnJlbnREaWdpdClcclxuXHRsZXQgc3VtRGlnaXRzID0gc3VtLnRvU3RyaW5nKCkuc3BsaXQoJycpLm1hcChOdW1iZXIpXHJcblx0bGV0IGxhc3REaWdpdCA9IHN1bURpZ2l0c1tzdW1EaWdpdHMubGVuZ3RoIC0gMV1cclxuXHRpZiAobGFzdERpZ2l0ID09IDApIHtcclxuXHRcdHJldHVybiAwXHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybiAxMCAtIGxhc3REaWdpdFxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgdmFsaWRhdGVDYXJkTnVtYmVyID0gbnVtYmVyID0+IHtcclxuXHRpZiAobnVtYmVyLmxlbmd0aCAhPSAxNikge1xyXG5cdFx0cmV0dXJuIGZhbHNlXHJcblx0fVxyXG5cdGxldCBudW1iZXJBcnJheSA9IG51bWJlci50b1N0cmluZygpLnNwbGl0KCcnKS5tYXAoTnVtYmVyKVxyXG5cdGxldCBudW1iZXJUb0NvbXBhcmUgPSBudW1iZXJBcnJheVtudW1iZXJBcnJheS5sZW5ndGggLSAxXVxyXG5cdG51bWJlckFycmF5LnBvcCgpXHJcblx0Zm9yIChsZXQgaSA9IG51bWJlckFycmF5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAyKSB7XHJcblx0XHRudW1iZXJBcnJheVtpXSAqPSAyXHJcblx0XHRpZiAobnVtYmVyQXJyYXlbaV0gPiA5KSB7XHJcblx0XHRcdG51bWJlckFycmF5W2ldID0gbnVtYmVyQXJyYXlbaV1cclxuXHRcdFx0XHQudG9TdHJpbmcoKVxyXG5cdFx0XHRcdC5zcGxpdCgnJylcclxuXHRcdFx0XHQubWFwKE51bWJlcilcclxuXHRcdFx0XHQucmVkdWNlKChzdW0sIGN1cnJlbnREaWdpdCkgPT4gc3VtICsgY3VycmVudERpZ2l0LCAwKVxyXG5cdFx0fVxyXG5cdH1cclxuXHRsZXQgc3VtID0gbnVtYmVyQXJyYXkucmVkdWNlKChzdW0sIGN1cnJlbnREaWdpdCkgPT4gc3VtICsgY3VycmVudERpZ2l0KVxyXG5cdGxldCBzdW1EaWdpdHMgPSBzdW0udG9TdHJpbmcoKS5zcGxpdCgnJykubWFwKE51bWJlcilcclxuXHRsZXQgbGFzdERpZ2l0ID0gc3VtRGlnaXRzW3N1bURpZ2l0cy5sZW5ndGggLSAxXVxyXG5cdGlmIChsYXN0RGlnaXQgPT0gMCkge1xyXG5cdFx0cmV0dXJuIG51bWJlclRvQ29tcGFyZSA9PSAwXHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybiBudW1iZXJUb0NvbXBhcmUgPT0gMTAgLSBsYXN0RGlnaXRcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGlucHV0QnV0dG9uSGFuZGxlciA9ICgpID0+IHtcclxuXHRpbnB1dFJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdpbnB1dC1ib3hfX3Jlc3VsdC0tc3VjY2VzcycpXHJcblx0aW5wdXRSZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnaW5wdXQtYm94X19yZXN1bHQtLWVycm9yJylcclxuXHRsZXQgdmFsdWUgPSBpbnB1dEZpZWxkLnZhbHVlXHJcblx0aWYgKHZhbHVlICE9ICcnKSB7XHJcblx0XHRpbnB1dEZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0LWJveF9faW5wdXQtLWVycm9yJylcclxuXHRcdGlucHV0UmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2lucHV0LWJveF9fcmVzdWx0LS1lcnJvcicpXHJcblx0XHRpZiAoY2hlY2tzdW1SYWRpby5jaGVja2VkKSB7XHJcblx0XHRcdGlucHV0UmVzdWx0LnRleHRDb250ZW50ID0gYENoZWNrc3VtOiAke2NhbGN1bGF0ZUNoZWNrc3VtKHZhbHVlKX1gXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAodmFsaWRhdGVDYXJkTnVtYmVyKHZhbHVlKSkge1xyXG5cdFx0XHRcdGlucHV0UmVzdWx0LmNsYXNzTGlzdC5hZGQoJ2lucHV0LWJveF9fcmVzdWx0LS1zdWNjZXNzJylcclxuXHRcdFx0XHRpbnB1dFJlc3VsdC50ZXh0Q29udGVudCA9IGBWYWxpZCBudW1iZXJgXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aW5wdXRSZXN1bHQuY2xhc3NMaXN0LmFkZCgnaW5wdXQtYm94X19yZXN1bHQtLWVycm9yJylcclxuXHRcdFx0XHRpbnB1dFJlc3VsdC50ZXh0Q29udGVudCA9IGBJbnZhbGlkIG51bWJlcmBcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHRpbnB1dEZpZWxkLmNsYXNzTGlzdC5hZGQoJ2lucHV0LWJveF9faW5wdXQtLWVycm9yJylcclxuXHRcdGlucHV0UmVzdWx0LnRleHRDb250ZW50ID0gJ1BsZWFzZSBlbnRlciBhIG51bWJlcidcclxuXHRcdGlucHV0UmVzdWx0LmNsYXNzTGlzdC5hZGQoJ2lucHV0LWJveF9fcmVzdWx0LS1lcnJvcicpXHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBpbnB1dEZpZWxkUHJvdGVjdGlvbkhhbmRsZXIgPSBlID0+IHtcclxuXHRjb25zdCBhbGxvd2VkS2V5cyA9IFsnQmFja3NwYWNlJywgJ0RlbGV0ZScsICdBcnJvd0xlZnQnLCAnQXJyb3dSaWdodCddXHJcblx0Y29uc3QgaXNEaWdpdCA9IGUua2V5ID49ICcwJyAmJiBlLmtleSA8PSAnOSdcclxuXHRjb25zdCBpc0FsbG93ZWRLZXkgPSBhbGxvd2VkS2V5cy5pbmNsdWRlcyhlLmtleSlcclxuXHRpZiAoIWlzRGlnaXQgJiYgIWlzQWxsb3dlZEtleSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXHJcblx0fVxyXG5cdGlmICh2YWxpZGF0aW9uUmFkaW8uY2hlY2tlZCAmJiBpbnB1dEZpZWxkLnZhbHVlLmxlbmd0aCA+PSAxNiAmJiBpc0RpZ2l0KSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KClcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IGlucHV0VG9DYXJkQW5kUmVzdWx0UmVzZXRIYW5kbGVyID0gKCkgPT4ge1xyXG5cdGlucHV0UmVzdWx0LnRleHRDb250ZW50ID0gJydcclxuXHRpZiAoaW5wdXRGaWVsZC52YWx1ZSA9PSAnJykge1xyXG5cdFx0bGV0IGltZ1RvUmVtb3ZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtYm94X19jYXJkLS1sb2dvLWltZycpXHJcblx0XHRyZW1vdmVJbWcoaW1nVG9SZW1vdmUpXHJcblx0fVxyXG5cdGlmIChpbnB1dEZpZWxkLnZhbHVlLmxlbmd0aCA8IDIpIHtcclxuXHRcdGNoZWNrQ2FyZExvZ28oaW5wdXRGaWVsZC52YWx1ZSlcclxuXHR9XHJcblx0aW5wdXRGaWVsZC52YWx1ZSA9IGlucHV0RmllbGQudmFsdWUucmVwbGFjZSgvXFxEL2csICcnKVxyXG5cdGNhcmROdW1iZXIudGV4dENvbnRlbnQgPSBpbnB1dEZpZWxkLnZhbHVlXHJcblx0aWYgKHZhbGlkYXRpb25SYWRpby5jaGVja2VkICYmIGlucHV0RmllbGQudmFsdWUubGVuZ3RoID4gMTYpIHtcclxuXHRcdGlucHV0RmllbGQudmFsdWUgPSBpbnB1dEZpZWxkLnZhbHVlLnNsaWNlKDAsIDE2KVxyXG5cdFx0Y2FyZE51bWJlci50ZXh0Q29udGVudCA9IGlucHV0RmllbGQudmFsdWVcclxuXHR9XHJcblx0aWYgKGlucHV0RmllbGQudmFsdWUubGVuZ3RoID49IDEgJiYgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5jYXJkLWJveF9fY2FyZC0tbG9nby1pbWdgKSkge1xyXG5cdFx0Y2FyZExvZ28uYXBwZW5kQ2hpbGQoZ2V0TG9nbyhOdW1iZXIoaW5wdXRGaWVsZC52YWx1ZVswXSkpKVxyXG5cdH1cclxufVxyXG5cclxuY29uc3QgcmVtb3ZlSW1nID0gaW1nID0+IHtcclxuXHRpbWcgPyBpbWcucmVtb3ZlKCkgOiBudWxsXHJcbn1cclxuXHJcbmNvbnN0IGNyZWF0ZUltZyA9IGxvZ28gPT4ge1xyXG5cdGlmIChsb2dvICE9IG51bGwpIHtcclxuXHRcdGxldCBuZXdJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG5cdFx0bmV3SW1nLnNyYyA9IGAuL2Rpc3QvaW1nLyR7bG9nb30ud2VicGBcclxuXHRcdG5ld0ltZy5jbGFzc0xpc3QuYWRkKCdjYXJkLWJveF9fY2FyZC0tbG9nby1pbWcnKVxyXG5cdFx0cmV0dXJuIG5ld0ltZ1xyXG5cdH1cclxufVxyXG5cclxuY29uc3QgZ2V0TG9nbyA9IGRpZ2l0ID0+IHtcclxuXHRzd2l0Y2ggKGRpZ2l0KSB7XHJcblx0XHRjYXNlIDI6XHJcblx0XHRjYXNlIDU6XHJcblx0XHRcdHJldHVybiBjcmVhdGVJbWcoJ21hc3RlcmNhcmQnKVxyXG5cdFx0Y2FzZSAzOlxyXG5cdFx0XHRyZXR1cm4gY3JlYXRlSW1nKCdhZXhwcmVzcycpXHJcblx0XHRjYXNlIDQ6XHJcblx0XHRcdHJldHVybiBjcmVhdGVJbWcoJ3Zpc2EnKVxyXG5cdFx0ZGVmYXVsdDpcclxuXHRcdFx0cmV0dXJuIG51bGxcclxuXHR9XHJcbn1cclxuXHJcbmNvbnN0IHJhZGlvQnV0dG9uc0hhbmRsZXIgPSAoKSA9PiB7XHJcblx0aWYgKHZhbGlkYXRpb25SYWRpby5jaGVja2VkKSB7XHJcblx0XHRpbnB1dFJlc3VsdC50ZXh0Q29udGVudCA9ICcnXHJcblx0XHRpbnB1dEZpZWxkLnZhbHVlID0gJydcclxuXHRcdGlmIChpbnB1dEZpZWxkLnZhbHVlID09ICcnKSB7XHJcblx0XHRcdGxldCBpbWdUb1JlbW92ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJveF9fY2FyZC0tbG9nby1pbWcnKVxyXG5cdFx0XHRyZW1vdmVJbWcoaW1nVG9SZW1vdmUpXHJcblx0XHR9XHJcblx0XHRjYXJkTnVtYmVyLnRleHRDb250ZW50ID0gJydcclxuXHRcdGNhcmQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpXHJcblx0XHRjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcblx0fSBlbHNlIHtcclxuXHRcdGlucHV0UmVzdWx0LnRleHRDb250ZW50ID0gJydcclxuXHRcdGlucHV0RmllbGQudmFsdWUgPSAnJ1xyXG5cdFx0Y2FyZE51bWJlci50ZXh0Q29udGVudCA9ICcnXHJcblx0XHRjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKVxyXG5cdFx0Y2FyZC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG5cdH1cclxufVxyXG5cclxucmFkaW9CdXR0b25zLmZvckVhY2gocmFkaW9CdXR0b24gPT4ge1xyXG5cdHJhZGlvQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHJhZGlvQnV0dG9uc0hhbmRsZXIpXHJcbn0pXHJcbmlucHV0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW5wdXRCdXR0b25IYW5kbGVyKVxyXG5pbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBpbnB1dEZpZWxkUHJvdGVjdGlvbkhhbmRsZXIpXHJcbmlucHV0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBpbnB1dFRvQ2FyZEFuZFJlc3VsdFJlc2V0SGFuZGxlcilcclxuIl19
